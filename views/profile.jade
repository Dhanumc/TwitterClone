//output:profile.html

extends layout

block content
  div(class="modal fade" tabindex="-1" role="dialog" id="myModal")
     div(class="modal-dialog" role="document")
        div(class="modal-content")
           div(class="modal-header")
              h3(class="modal-title") Compose New Tweet
           div(class="modal-body")
              div(class="modal-form")
                 form(class="tweet-form" method="post" action="/newStatus")
                    div(class="tweet-content")
                       .row
                          div(class="col-sm-12")
                             textarea(rows="4", cols="60", name="status", style="min-width:100%")
                       .row
                          div(class="tweetToolbar")
                             div(class="col-sm-9")
                                label(class="myFile")
                                  button(class="btn btn-info btn-sm") Upload file
                                  input(type="file" name="file" class="btn btn-info btn-sm" id="fileUpload")
                                label(class="myFile")  
                                  button(class="btn btn-info btn-sm") Upload GIF
                                  input(type="file" name="file" class="btn btn-info btn-sm" id="gifUpload")
                                label(class="myFile")  
                                  button(type="" value="poll" class="btn btn-info btn-sm") Add Poll
                                label(class="myFile")
                                  button(type="" value="location" class="btn btn-info btn-sm") Location
                             div(class="col-sm-3")
                                div(class="floatMeRight")
                                   span(class="counter") 140
                                   button(type="submit" value="Tweet!!" class="btn btn-info btn-sm") Tweet

  navbar.navbar.navbar-default.navbar-fixed-top
    .container
      ul.nav.navbar-nav
        li.active
          a(href='#') Home
        li
          a(href='#about') About
      ul.nav.navbar-nav.navbar-right(style="padding-top:10px;")
        li
          form(class="form-inline")
            div(class="form-group")
              input(type="text" class="form-control" placeholder="Search")
            button(type="submit" class="btn btn-default") Submit
        li
           img(src="#{user.profileImage}" id="navBarProfileImage")
        li
           button(type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#myModal") New Tweet
          
            
  .jumbotron#profilePageJumbo(style="background-image:url(#{user.headerImage})")
      form(id="uploadForm" action="/uploadHeaderPic" method="POST" enctype="multipart/form-data")
          label(class="myFile")
             img(src="http://wscont1.apps.microsoft.com/winstore/1x/c37a9d99-6698-4339-acf3-c01daa75fb65/Icon.13385.png" alt="")
             input(type="file", name="file",  class="btn btn-info btn-sm", id="headerImageUpload")
    .container

  navbar.navbar.navbar-default.navbar-staic-top
    .row(id="userStats")
        div(class="col-sm-offset-5 col-sm-7")
          .container
            ul.nav.navbar-nav
              li.active
                a(href='#') Tweets
                span(id="numOfTweets") #{statuses.length}
              li
                a(href='#') Following
                span(id="numFollowing") #{user.following.length}
              li
                a(href='#') Followers
                span(id="numOfFollowers") #{user.followers.length}
              li
                a(href='#') Likes
                span(id="numOfLikes") N/A
              li
                a(href='#') Lists
                span(id="numOfLists") N/A
              li(class="floatMeRight")
              if isCurrentUser
                input(type="submit", class="editUser btn btn-info btn-md", value="Edit Profile")
              else
                if isFollowing
                   input(type="submit", class="btn btn-info btn-md", id="follow", value="Following")
                else
                   input(type="submit", class="btn btn-info btn-md", id="follow", value="Follow")

   
  .container
    .row
        div(class="col-sm-4" id="profilePicture")
          img(src="#{user.profileImage}" id="profilePictureImg")
          form(id="uploadProfileForm" action="/uploadProfilePic" method="POST" enctype="multipart/form-data")
             label(class="myFile")
                img(src="http://wscont1.apps.microsoft.com/winstore/1x/c37a9d99-6698-4339-acf3-c01daa75fb65/Icon.13385.png" alt="")
                input(type="file", name="profileFileUpload",  class="btn btn-info btn-sm", id="profileFileUpload")
    .row
     div(class="col-sm-3" id="userProfileCard")
       p Welcome
          span(class="realName") #{user.name}
       p(class="username") @#{user.username}
       p(class="userDescription") #{user.description}
       p Joined #{user.created_at}
     div(class="col-sm-8 well well-sm", style="floatMeRight", id="twitterStatuses")
       h2(id="statusTitle") Statuses
       ul
           hr
           - each val in statuses
             li
               img(src="#{user.profileImage}" id="userProfileImage")
               p 
                  strong #{user.name} @#{user.username} 
                  span=val.updated_at
               p(class="statusText")=val.status
               br
               if isCurrentUser
                 div.buttons
                    input(type="submit", class="editable btn btn-default",  id= val._id, value="Edit")
                    form(action="/delete" method="POST")
                    input(type="hidden", name="statusid", value=val._id)
                    input(type="submit", value="Delete", class="btn btn-default")
                 br
             hr
